import{_ as at}from"./my-tabs-dbdbb6b9.js";import{_ as j,o as g,c as A,h as u,w as r,b as l,a1 as st,t as h,d as z,a6 as lt,g as _,a7 as it,a8 as ct,U as rt,a9 as pt,at as mt,aT as dt,B as _t,al as ut,aa as gt,ab as ft,u as p,a as $,A as M,j as v,au as bt,l as ht,k as yt}from"./index-a360b131.js";import{S as G,t as vt,h as xt,P as wt,r as Ct,l as $t,G as Mt,m as kt,a as Ft,u as Pt,q as N,M as St,j as Et,n as Bt,o as Lt,p as Dt,A as Rt,d as jt,_ as At}from"./threeMinx-2c4305b0.js";import{h as zt,_ as k}from"./my-table-2797da89.js";import{M as It}from"./MapControls-fb6fb511.js";import{_ as F}from"./my-box-a135ed03.js";import"./el-checkbox-63c4bf05.js";import"./isEqual-dc73e6ec.js";/* empty css               */import"./el-scrollbar-922a1011.js";/* empty css                  *//* empty css                */const Ot={class:"label"},Vt=["src","onClick"],Tt={class:"msg"},Ut={class:"name"},Gt={class:"flex m-between m-t-10"},Nt={class:"val"},qt={class:"unit"},Ht=z({name:"labelDemo"}),Wt=Object.assign(Ht,{props:{data:{},callBack:Function},setup(o){const t=o;function n(){var i;(i=t.callBack)==null||i.apply()}return(i,c)=>{const e=zt;return g(),A("div",Ot,[u(e,{trigger:"click",teleported:!1,placement:"top"},{reference:r(()=>[l("img",{src:i.getImgUrl(o.data.img),class:"img",onClick:st(n,["stop"])},null,8,Vt)]),default:r(()=>[l("div",Tt,[l("div",Ut,h(o.data.title),1),l("div",Gt,[l("span",Nt,h(o.data.name),1),l("span",qt,h(o.data.val)+h(o.data.unit),1)])])]),_:1})])}}}),Xt=j(Wt,[["__scopeId","data-v-9a43b887"]]);const Yt={style:{position:"absolute","z-index":"10"},class:"flex-center w100 h100"},Jt={class:"fw",style:{"font-size":"30px"}},Kt={class:"geo-box",style:{right:"10px",bottom:"10px"}},Qt=z({name:"tunnelling"}),Zt=Object.assign(Qt,{props:{type:{type:Number}},setup(o){const t=o;let n=lt(null),i=_(!1),c=_(0),e,d=new G,f,P,x,S,E;it(n,a=>{S=a[0].contentRect.width,E=a[0].contentRect.height,f.aspect=S/E,f.updateProjectionMatrix(),e.setSize(S,E),x.setSize(S,E)}),ct(()=>{i.value=!0,q()}),rt(()=>{cancelAnimationFrame(T),e==null||e.dispose(),d.clear(),n=null,d=null,x=null});function q(){d=new G;const a=vt.load("/my-product/model/blue2.jpg");a.colorSpace=xt,d.background=a,f=new wt(45,n.value.offsetWidth/n.value.offsetHeight,1,2e3),f.position.set(109.63564910104216,86.72574213762547,96.25213350271133),d.add(f),e=Ct(n),x=$t(n,!1),P=new It(f,e.domElement),P.target.set(110.48293056262132,-50.336801686323525,-3.7927571043980493),P.minPolarAngle=0,P.maxPolarAngle=Math.PI/2,H()}let w,I,B=[117.076481,0,31.660061];function H(){new pt().get("/my-product/model/巷道综采面.glb").then(a=>{let m=URL.createObjectURL(a);Mt.load(m,function(s){i.value=!1,w=s.scene,w.position.set(...B),J(w.position),d.add(w),d.add(L),X(),K(),I=kt(s),U()},function(s){s.lengthComputable&&(c.value=Math.round(s.loaded/s.total*100,2))})})}let W=_([[{title:"一氧化碳浓度",name:"一氧化碳",val:"20",unit:"%",img:"../assets/img/label/co.png",position:[99.1077263429123,0,-10.28176099837259]},{title:"一氧化碳浓度",name:"一氧化碳",val:"30",unit:"%",img:"../assets/img/label/co.png",position:[110.60365415557996,0,40.15225244267442]},{title:"二氧化碳浓度",name:"二氧化碳",val:"30",unit:"%",img:"../assets/img/label/co2.png",position:[109.38091418508517,.24890132993459702,35.813256459587826]},{img:"../assets/img/label/co2.png",position:[104.86692288089702,.24890132993459702,38.91992184507059]},{img:"../assets/img/label/ch4.png",position:[100.3066578978087,.24890132993459702,46.153378835018145]},{img:"../assets/img/label/o2.png",position:[95.4533682948091,.24890132993459702,52.292816076431386]},{img:"../assets/img/label/smoke.png",position:[1120.488552396417,.24890132993461123,52.2581985014087]},{img:"../assets/img/label/windSpeed.png",position:[112.263717814301,.00813946086616113,32.102418696778855]}],[{img:"../assets/img/label/waterLevel.png",position:[109.38091418508517,.24890132993459702,35.813256459587826]},{img:"../assets/img/label/waterLevel.png",position:[104.86692288089702,.24890132993459702,38.91992184507059]}],[{img:"../assets/img/label/temperature.png",position:[108.63210836157958,.007512023720328109,32.183433168254034]},{img:"../assets/img/label/temperature.png",position:[110.46978207136983,.00631549900405215,31.68355181851937]}],[{img:"../assets/img/label/smoke.png",position:[108.63210836157958,.007512023720328109,32.183433168254034]},{img:"../assets/img/label/smoke.png",position:[110.46978207136983,.00631549900405215,31.68355181851937]}],[{img:"../assets/img/label/co2.png",position:[104.86692288089702,.24890132993459702,38.91992184507059]},{img:"../assets/img/label/ch4.png",position:[100.3066578978087,.24890132993459702,46.153378835018145]},{img:"../assets/img/label/o2.png",position:[95.4533682948091,.24890132993459702,52.292816076431386]}],[{img:"../assets/img/label/smoke.png",position:[112.48855239641689,.24890132993461123,52.2581985014087]},{img:"../assets/img/label/windSpeed.png",position:[112.263717814301,.00813946086616113,32.102418696778855]}]]),L=new Ft;function X(){L.clear(),W.value.forEach((a,m)=>{a==null||a.forEach(s=>{const b=mt(Xt,{data:s,callBack:function(){console.log(s)}}).use(dt).mount(document.createElement("div")).$el,y=new Pt(b);y.position.set(...s==null?void 0:s.position),y.center=new N(.5,1),y.visibleVal=m,y.visible=t.type==m,L.add(y)})})}_t(()=>t.type,a=>Y(a));function Y(a){var m;(m=L.children)==null||m.forEach((s,b)=>{s.visible=a==s.visibleVal})}let C;function J({x:a,y:m,z:s}){C=new St(new Et(1e3,1e3),new Bt({color:16777215,side:Lt,opacity:0,transparent:!0})),C.rotation.x=.5*Math.PI,C.position.set(a,m,s),d.add(C),e.domElement.addEventListener("mousedown",b=>{b.button==2&&V(b,[C,w],!0)},!1),e.domElement.addEventListener("mousemove",b=>{ut(V(b,[C,w],!1))},!1)}const O=new Dt;let D=_({x:B[0].toFixed(4),y:B[1].toFixed(4),z:B[2].toFixed(4)});function V(a,m,s){const{left:b,top:y,width:Q,height:Z}=e.domElement.getBoundingClientRect(),tt=new N((a.clientX-b)/Q*2-1,-((a.clientY-y)/Z)*2+1);O.setFromCamera(tt,f);const R=O.intersectObjects(m);if(!(R.length<=0)){const{x:et,y:nt,z:ot}=R[0].point;D.value={x:et.toFixed(4),y:nt.toFixed(4),z:ot.toFixed(4)},s&&console.log(R[0].point)}}function K(){d.add(new Rt("#ffffff",.8))}let T;function U(){x==null||x.render(d,f),P.update(),I.update(jt.getDelta()),e==null||e.render(d,f),T=requestAnimationFrame(U)}return(a,m)=>{const s=At;return g(),A("div",{ref_key:"container",ref:n},[gt(l("div",Yt,[u(s,{scale:2},{default:r(()=>[l("span",Jt,h(p(c))+"% ",1)]),_:1})],512),[[ft,p(i)]]),l("div",Kt,[l("span",null,"经度："+h(p(D).x),1),l("span",null,"纬度："+h(p(D).z),1),l("span",null,"海拔："+h(p(D).y),1)])],512)}}}),te=j(Zt,[["__scopeId","data-v-d4dbc234"]]),ee=o=>$({method:"get",data:o,url:M+"/safetyMonitoring/integratedMonitoring/safetyCount"}),ne=o=>$({method:"get",data:o,url:M+"/safetyMonitoring/integratedMonitoring/hydrologyCount"}),oe=o=>$({method:"get",data:o,url:M+"/safetyMonitoring/integratedMonitoring/tubeCount"}),ae=o=>$({method:"get",data:o,url:M+"/safetyMonitoring/integratedMonitoring/vibrationCount"}),se=o=>$({method:"get",data:o,url:M+"/safetyMonitoring/integratedMonitoring/fireExtinctionCount"}),le=o=>$({method:"get",data:o,url:M+"/safetyMonitoring/integratedMonitoring/impactCount"}),ie=l("span",{style:{color:"#4d88fe"},class:"pointer"}," 查看详情 ",-1),ce={__name:"security",setup(o){let t=_([]);return ee().then(n=>{t.value=n.data}),(n,i)=>{const c=k,e=F;return g(),v(e,{class:"h100",title:"安全监测"},{right:r(()=>[ie]),default:r(()=>[u(c,{data:p(t),columns:[{type:"selection"},{prop:"testPointType",label:"测点类型"},{prop:"alarmCount",label:"告警数"},{prop:"testPointCount",label:"测点数"}]},null,8,["data"])]),_:1})}}},re=l("span",{style:{color:"#4d88fe"},class:"pointer"}," 查看详情 ",-1),pe={__name:"hydrology",setup(o){let t=_([]);return ne().then(n=>{t.value=n.data}),(n,i)=>{const c=k,e=F;return g(),v(e,{class:"h100",title:"水文监测"},{right:r(()=>[re]),default:r(()=>[u(c,{data:p(t),columns:[{type:"selection"},{prop:"testPointType",label:"测点类型"},{prop:"alarmCount",label:"告警数"},{prop:"testPointCount",label:"测点数"}]},null,8,["data"])]),_:1})}}},me=l("span",{style:{color:"#4d88fe"},class:"pointer"}," 查看详情 ",-1),de={__name:"tube",setup(o){let t=_([]);return oe().then(n=>{t.value=n.data}),(n,i)=>{const c=k,e=F;return g(),v(e,{class:"h100",title:"束管监测"},{right:r(()=>[me]),default:r(()=>[u(c,{data:p(t),columns:[{type:"selection"},{prop:"location",label:"位置",align:"center"},{prop:"alarmCount",label:"告警气体数",align:"center"}]},null,8,["data"])]),_:1})}}},_e=l("span",{style:{color:"#4d88fe"},class:"pointer"}," 查看详情 ",-1),ue={__name:"microseism",setup(o){let t=_([]);return ae().then(n=>{t.value=n.data}),(n,i)=>{const c=k,e=F;return g(),v(e,{class:"h100",title:"微震监测"},{right:r(()=>[_e]),default:r(()=>[u(c,{data:p(t),columns:[{prop:"number",label:"序号",width:"70"},{prop:"dateTime",label:"时间",width:"170"},{prop:"energy",label:"能量",width:"80"},{prop:"location",label:"位置",width:"270"}]},null,8,["data"])]),_:1})}}},ge=l("span",{style:{color:"#4d88fe"},class:"pointer"}," 查看详情 ",-1),fe={__name:"fire",setup(o){let t=_([]);return se().then(n=>{t.value=n.data}),(n,i)=>{const c=k,e=F;return g(),v(e,{class:"h100",title:"区域防灭火监测"},{right:r(()=>[ge]),default:r(()=>[u(c,{data:p(t),columns:[{type:"selection"},{prop:"alarmCount",label:"告警数",width:"80"},{prop:"location",label:"位置"}]},null,8,["data"])]),_:1})}}},be=l("span",{style:{color:"#4d88fe"},class:"pointer"}," 查看详情 ",-1),he={__name:"pressure",setup(o){let t=_([]);return le().then(n=>{t.value=n.data}),(n,i)=>{const c=k,e=F;return g(),v(e,{class:"h100",title:"矿压监测"},{right:r(()=>[be]),default:r(()=>[u(c,{data:p(t),columns:[{type:"selection"},{prop:"location",label:"测点位置"},{prop:"alarmCount",label:"告警数"},{prop:"testPointCount",label:"测点数"}]},null,8,["data"])]),_:1})}}};const ye={class:"w100 h100 page"},ve={class:"flex m-between h100"},xe={class:"left flex-col h100"},we={class:"right flex s-center"},Ce=z({name:"/monitoring/Integrated"}),$e=Object.assign(Ce,{setup(o){let t=_(0);return(n,i)=>{const c=at;return g(),A("div",ye,[u(te,{class:"three",type:p(t)},null,8,["type"]),l("div",ve,[l("div",xe,[u(bt,{name:"fade-transform",mode:"out-in",appear:""},{default:r(()=>[(g(),v(yt([ce,pe,de,ue,fe,he][p(t)]),{type:p(t)},null,8,["type"]))]),_:1})]),l("div",we,[u(c,{modelValue:p(t),"onUpdate:modelValue":i[0]||(i[0]=e=>ht(t)?t.value=e:t=e),tabs:[{name:"安全监测",subname:"safety monitoring",img:"tab-1"},{name:"水文监测",subname:"hydrology",img:"tab-2"},{name:"束管监测",subname:"Bundle tube",img:"tab-3"},{name:"微震监测",subname:"Microseism",img:"tab-4"},{name:"区域防灭火监测 ",subname:"Fire prevention",img:"tab-5"},{name:"顶板与冲击地压监测",subname:"Roof and rock burst",img:"tab-6"}]},null,8,["modelValue"])])])])}}}),ze=j($e,[["__scopeId","data-v-8c1d8a29"]]);export{ze as default};
