import{_ as T}from"./my-compass-a39cd824.js";import{S as z,P as N,c as D,l as I,r as P,a as U,G as M,A as E,C as G,k as A,b as $,_ as q}from"./threeMinx-2c4305b0.js";import{a as V,A as H,g as f,a7 as J,a8 as K,U as Q,a9 as W,L as X,at as Y,c as Z,aa as ee,ab as te,u as g,b as F,h as j,w as ae,d as ne,o as oe,t as se}from"./index-a360b131.js";import{m as le}from"./my-label-41458c09.js";import"./my-box-a135ed03.js";const ie=v=>V({method:"get",data:v,url:H+"/integratedControl/pressureAir/machineInfo"}),ce={style:{position:"absolute","z-index":"10"},class:"flex-center w100 h100"},re={class:"fw",style:{"font-size":"30px"}},ue=ne({name:"comprehensive/pressure"}),he=Object.assign(ue,{setup(v){let r=f(null),i,s,n,c,_=f(!1),b=f(0),y,u,d;J(r,o=>{u=o[0].contentRect.width,d=o[0].contentRect.height,n.aspect=u/d,n.updateProjectionMatrix(),i.setSize(u,d),c.setSize(u,d)}),K(()=>{_.value=!0,k()}),Q(()=>{cancelAnimationFrame(x),i==null||i.dispose(),r=null,s=null,c=null});function k(){s=new z,n=new N(45,u/d,1,2e3),n.position.set(-9,3,5),n.lookAt(-2.96,2.12,-3.82),s.add(n),y=D(n),c=I(r),i=P(r),C(),B()}let w=[],m,h=new U;function B(){new W().get("/my-product/model/压风系统.glb").then(o=>{let e=URL.createObjectURL(o);M.load(e,a=>{_.value=!1,m=a.scene,s.add(m),w=m.getObjectByName("墙").children;for(let t=1;t<4;t++){const l=m.getObjectByName("主体").clone();l.name=`主体${t}`,l.position.x=l.position.x+t*4,s.add(l)}s.add(h),O(),S()},a=>{a.lengthComputable&&(b.value=Math.round(a.loaded/a.total*100,2))})})}function C(){s.add(new E("#fff",.8))}let p=f([]);function O(){p.value=[],h.clear(),ie().then(o=>{o.data.forEach(e=>{p.value.push({name:e.machineName,list:[{title:"运行状态",val:e.runningState},{title:"供气压力",val:e.pressure,suffix:"MPa"},{title:"排气温度",val:e.temperature,suffix:"℃"},{title:"运行时间",val:e.runningTime,suffix:"h"}]})}),X(()=>{const{x:e,y:a,z:t}=m.getObjectByName("主体").position;for(let l=0,R=p.value.length;l<R;l++)L(l,[e+l*4-1,a,t])})})}function L(o,e){const a=Y(le,{data:p.value[o],callBack:()=>{console.log(p.value[o])}}).mount(document.createElement("div")).$el,t=new G(a);t.position.set(...e),t.scale.set(.01,.01,.01),h.add(t)}let x;function S(){A.value=y(w),$(n),c==null||c.render(s,n),i==null||i.render(s,n),x=requestAnimationFrame(S)}return(o,e)=>{const a=q,t=T;return oe(),Z("div",{class:"w100 h100",ref_key:"container",ref:r},[ee(F("div",ce,[j(a,{scale:2},{default:ae(()=>[F("span",re,se(g(b))+"% ",1)]),_:1})],512),[[te,g(_)]]),j(t,{keyType:g(A)},null,8,["keyType"])],512)}}});export{he as default};
