import{cq as le,bG as W,cr as ie,m as j,s as F,d as A,v as ce,R as ae,be as ue,g as v,f as _,U as fe,C as $,z as U,o as N,j as D,w as ne,aa as de,b as X,Y as M,u as b,n as Y,ab as me,au as ve,aG as se,c as re,h as K,F as pe,q as he,an as L,T as V,B as q,bf as ge,L as G,x as ye,ad as be,a8 as Se,bi as we,D as Ee,k as Te,Z as ze,ao as ke,a4 as xe,cs as _e}from"./index-a360b131.js";var Ce=/\s/;function He(e){for(var a=e.length;a--&&Ce.test(e.charAt(a)););return a}var Re=/^\s+/;function Be(e){return e&&e.slice(0,He(e)+1).replace(Re,"")}var Z=0/0,Le=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,Me=/^0o[0-7]+$/i,Pe=parseInt;function J(e){if(typeof e=="number")return e;if(le(e))return Z;if(W(e)){var a=typeof e.valueOf=="function"?e.valueOf():e;e=W(a)?a+"":a}if(typeof e!="string")return e===0?e:+e;e=Be(e);var s=Ne.test(e);return s||Me.test(e)?Pe(e.slice(2),s?2:8):Le.test(e)?Z:+e}var Oe=function(){return ie.Date.now()};const I=Oe;var Ae="Expected a function",Ie=Math.max,We=Math.min;function tt(e,a,s){var r,c,f,i,u,o,m=0,p=!1,l=!1,h=!0;if(typeof e!="function")throw new TypeError(Ae);a=J(a)||0,W(s)&&(p=!!s.leading,l="maxWait"in s,f=l?Ie(J(s.maxWait)||0,a):f,h="trailing"in s?!!s.trailing:h);function g(n){var t=r,d=c;return r=c=void 0,m=n,i=e.apply(d,t),i}function S(n){return m=n,u=setTimeout(w,a),p?g(n):i}function C(n){var t=n-o,d=n-m,y=a-t;return l?We(y,f-d):y}function k(n){var t=n-o,d=n-m;return o===void 0||t>=a||t<0||l&&d>=f}function w(){var n=I();if(k(n))return E(n);u=setTimeout(w,C(n))}function E(n){return u=void 0,h&&r?g(n):(r=c=void 0,i)}function H(){u!==void 0&&clearTimeout(u),m=0,r=o=c=u=void 0}function R(){return u===void 0?i:E(I())}function T(){var n=I(),t=k(n);if(r=arguments,c=this,o=n,t){if(u===void 0)return S(o);if(l)return clearTimeout(u),u=setTimeout(w,a),g(o)}return u===void 0&&(u=setTimeout(w,a)),i}return T.cancel=H,T.flush=R,T}const x=4,$e={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},De=({move:e,size:a,bar:s})=>({[s.size]:a,transform:`translate${s.axis}(${e}%)`}),oe=Symbol("scrollbarContextKey"),Xe=j({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Ye="Thumb",je=A({__name:"thumb",props:Xe,setup(e){const a=e,s=ce(oe),r=ae("scrollbar");s||ue(Ye,"can not inject scrollbar context");const c=v(),f=v(),i=v({}),u=v(!1);let o=!1,m=!1,p=se?document.onselectstart:null;const l=_(()=>$e[a.vertical?"vertical":"horizontal"]),h=_(()=>De({size:a.size,move:a.move,bar:l.value})),g=_(()=>c.value[l.value.offset]**2/s.wrapElement[l.value.scrollSize]/a.ratio/f.value[l.value.offset]),S=n=>{var t;if(n.stopPropagation(),n.ctrlKey||[1,2].includes(n.button))return;(t=window.getSelection())==null||t.removeAllRanges(),k(n);const d=n.currentTarget;d&&(i.value[l.value.axis]=d[l.value.offset]-(n[l.value.client]-d.getBoundingClientRect()[l.value.direction]))},C=n=>{if(!f.value||!c.value||!s.wrapElement)return;const t=Math.abs(n.target.getBoundingClientRect()[l.value.direction]-n[l.value.client]),d=f.value[l.value.offset]/2,y=(t-d)*100*g.value/c.value[l.value.offset];s.wrapElement[l.value.scroll]=y*s.wrapElement[l.value.scrollSize]/100},k=n=>{n.stopImmediatePropagation(),o=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",E),p=document.onselectstart,document.onselectstart=()=>!1},w=n=>{if(!c.value||!f.value||o===!1)return;const t=i.value[l.value.axis];if(!t)return;const d=(c.value.getBoundingClientRect()[l.value.direction]-n[l.value.client])*-1,y=f.value[l.value.offset]-t,B=(d-y)*100*g.value/c.value[l.value.offset];s.wrapElement[l.value.scroll]=B*s.wrapElement[l.value.scrollSize]/100},E=()=>{o=!1,i.value[l.value.axis]=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",E),T(),m&&(u.value=!1)},H=()=>{m=!1,u.value=!!a.size},R=()=>{m=!0,u.value=o};fe(()=>{T(),document.removeEventListener("mouseup",E)});const T=()=>{document.onselectstart!==p&&(document.onselectstart=p)};return $(U(s,"scrollbarElement"),"mousemove",H),$(U(s,"scrollbarElement"),"mouseleave",R),(n,t)=>(N(),D(ve,{name:b(r).b("fade"),persisted:""},{default:ne(()=>[de(X("div",{ref_key:"instance",ref:c,class:M([b(r).e("bar"),b(r).is(b(l).key)]),onMousedown:C},[X("div",{ref_key:"thumb",ref:f,class:M(b(r).e("thumb")),style:Y(b(h)),onMousedown:S},null,38)],34),[[me,n.always||u.value]])]),_:1},8,["name"]))}});var Q=F(je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Fe=j({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ue=A({__name:"bar",props:Fe,setup(e,{expose:a}){const s=e,r=v(0),c=v(0);return a({handleScroll:i=>{if(i){const u=i.offsetHeight-x,o=i.offsetWidth-x;c.value=i.scrollTop*100/u*s.ratioY,r.value=i.scrollLeft*100/o*s.ratioX}}}),(i,u)=>(N(),re(pe,null,[K(Q,{move:r.value,ratio:i.ratioX,size:i.width,always:i.always},null,8,["move","ratio","size","always"]),K(Q,{move:c.value,ratio:i.ratioY,size:i.height,vertical:"",always:i.always},null,8,["move","ratio","size","always"])],64))}});var Ke=F(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ve=j({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:he([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),qe={scroll:({scrollTop:e,scrollLeft:a})=>[e,a].every(L)},Ge="ElScrollbar",Ze=A({name:Ge}),Je=A({...Ze,props:Ve,emits:qe,setup(e,{expose:a,emit:s}){const r=e,c=ae("scrollbar");let f,i;const u=v(),o=v(),m=v(),p=v("0"),l=v("0"),h=v(),g=v(1),S=v(1),C=_(()=>{const t={};return r.height&&(t.height=V(r.height)),r.maxHeight&&(t.maxHeight=V(r.maxHeight)),[r.wrapStyle,t]}),k=_(()=>[r.wrapClass,c.e("wrap"),{[c.em("wrap","hidden-default")]:!r.native}]),w=_(()=>[c.e("view"),r.viewClass]),E=()=>{var t;o.value&&((t=h.value)==null||t.handleScroll(o.value),s("scroll",{scrollTop:o.value.scrollTop,scrollLeft:o.value.scrollLeft}))};function H(t,d){ke(t)?o.value.scrollTo(t):L(t)&&L(d)&&o.value.scrollTo(t,d)}const R=t=>{L(t)&&(o.value.scrollTop=t)},T=t=>{L(t)&&(o.value.scrollLeft=t)},n=()=>{if(!o.value)return;const t=o.value.offsetHeight-x,d=o.value.offsetWidth-x,y=t**2/o.value.scrollHeight,B=d**2/o.value.scrollWidth,P=Math.max(y,r.minSize),O=Math.max(B,r.minSize);g.value=y/(t-y)/(P/(t-P)),S.value=B/(d-B)/(O/(d-O)),l.value=P+x<t?`${P}px`:"",p.value=O+x<d?`${O}px`:""};return q(()=>r.noresize,t=>{t?(f==null||f(),i==null||i()):({stop:f}=ge(m,n),i=$("resize",n))},{immediate:!0}),q(()=>[r.maxHeight,r.height],()=>{r.native||G(()=>{var t;n(),o.value&&((t=h.value)==null||t.handleScroll(o.value))})}),ye(oe,be({scrollbarElement:u,wrapElement:o})),Se(()=>{r.native||G(()=>{n()})}),we(()=>n()),a({wrapRef:o,update:n,scrollTo:H,setScrollTop:R,setScrollLeft:T,handleScroll:E}),(t,d)=>(N(),re("div",{ref_key:"scrollbarRef",ref:u,class:M(b(c).b())},[X("div",{ref_key:"wrapRef",ref:o,class:M(b(k)),style:Y(b(C)),onScroll:E},[(N(),D(Te(t.tag),{ref_key:"resizeRef",ref:m,class:M(b(w)),style:Y(t.viewStyle)},{default:ne(()=>[Ee(t.$slots,"default")]),_:3},8,["class","style"]))],38),t.native?ze("v-if",!0):(N(),D(Ke,{key:0,ref_key:"barRef",ref:h,height:l.value,width:p.value,always:t.always,"ratio-x":S.value,"ratio-y":g.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Qe=F(Je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const at=xe(Qe),z=new Map;let ee;se&&(document.addEventListener("mousedown",e=>ee=e),document.addEventListener("mouseup",e=>{for(const a of z.values())for(const{documentHandler:s}of a)s(e,ee)}));function te(e,a){let s=[];return Array.isArray(a.arg)?s=a.arg:_e(a.arg)&&s.push(a.arg),function(r,c){const f=a.instance.popperRef,i=r.target,u=c==null?void 0:c.target,o=!a||!a.instance,m=!i||!u,p=e.contains(i)||e.contains(u),l=e===i,h=s.length&&s.some(S=>S==null?void 0:S.contains(i))||s.length&&s.includes(u),g=f&&(f.contains(i)||f.contains(u));o||m||p||l||h||g||a.value(r,c)}}const nt={beforeMount(e,a){z.has(e)||z.set(e,[]),z.get(e).push({documentHandler:te(e,a),bindingFn:a.value})},updated(e,a){z.has(e)||z.set(e,[]);const s=z.get(e),r=s.findIndex(f=>f.bindingFn===a.oldValue),c={documentHandler:te(e,a),bindingFn:a.value};r>=0?s.splice(r,1,c):s.push(c)},unmounted(e){z.delete(e)}};export{nt as C,at as E,tt as d};
