import{f as I,_ as P}from"./my-alarm-27769293.js";import{_ as U}from"./my-compass-a39cd824.js";import{S as D,P as M,c as T,r as E,l as G,a as V,G as q,C as H,A as J,s as K,k as S,b as Q,_ as W}from"./threeMinx-2c4305b0.js";import{a6 as X,g as x,a7 as Y,a8 as Z,U as ee,a9 as te,at as oe,o as O,c as F,aa as ae,ab as ne,u as y,b as f,h as u,w as se,t as ie,d as N,_ as ce,p as le,e as re}from"./index-a360b131.js";import{m as pe}from"./my-label-41458c09.js";/* empty css                   */import"./my-list-panel-dba34f6a.js";/* empty css                 *//* empty css               */import"./el-select-4ba0ef32.js";import"./el-scrollbar-922a1011.js";import"./strings-41f0a66e.js";import"./isEqual-dc73e6ec.js";import"./my-table-2797da89.js";import"./el-checkbox-63c4bf05.js";/* empty css                  *//* empty css                */import"./my-box-a135ed03.js";const de={style:{position:"absolute","z-index":"10"},class:"flex-center w100 h100"},me={class:"fw",style:{"font-size":"30px"}},_e=N({name:"drain"}),fe=Object.assign(_e,{setup(p){let l=X(null),a,o,s,g,r,h=x(!1),w=x(0),d,m;Y(l,n=>{d=n[0].contentRect.width,m=n[0].contentRect.height,s.aspect=d/m,s.updateProjectionMatrix(),a.setSize(d,m),r.setSize(d,m)}),Z(()=>{h.value=!0,k()}),ee(()=>{cancelAnimationFrame(j),a==null||a.dispose(),l=null,o=null,r=null});function k(){o=new D,s=new M(45,d/m,1,2e3),s.position.set(0,4,0),g=T(s),o.add(s),a=E(l),a.shadowMap.enabled=!0,r=G(l),L(),R()}let z=[],c,b=new V;function R(){new te().get("/my-product/model/供排水系统.glb").then(n=>{let _=URL.createObjectURL(n);q.load(_,i=>{o.add(b),C(),h.value=!1,c=i.scene,z=c.getObjectByName("墙体").children,o.add(c);for(let e=1;e<10;e++){const t=c.getObjectByName("顶灯").clone();t.position.z=t.position.z-e*12,o.add(t)}for(let e=1;e<9;e++){const t=c.getObjectByName("水泵").clone();t.position.z=t.position.z-e*12.6,o.add(t)}for(let e=1;e<15;e++){const t=c.getObjectByName("水泵箱").clone();t.position.z=t.position.z-e*8,o.add(t)}for(let e=1;e<6;e++){const t=c.getObjectByName("电箱").clone();t.position.z=t.position.z-e*18.5,o.add(t)}B()},i=>{i.lengthComputable&&(w.value=Math.round(i.loaded/i.total*100,2))})})}function C(){I().then(n=>{b.clear();const{x:_,y:i,z:e}=c.getObjectByName("顶灯").clone().position;n.data.forEach((t,$)=>{const A=oe(pe,{data:{name:t.valveName,list:[{title:"阀位",val:t.valveValue,suffix:"%"}]},callBack:function(){}}).mount(document.createElement("div")).$el,v=new H(A);v.position.set(_,i-3,e-($+1)*12),v.scale.set(.02,.02,.02),b.add(v)})})}function L(){o.add(new J("#ffffff",.5));let n=new K("#ffffff",.5);n.position.set(0,15,-30),o.add(n)}let j;function B(){S.value=g(z),Q(s),r==null||r.render(o,s),a==null||a.render(o,s),j=requestAnimationFrame(B)}return(n,_)=>{const i=W,e=U;return O(),F("div",{ref_key:"container",ref:l},[ae(f("div",de,[u(i,{scale:2},{default:se(()=>[f("span",me,ie(y(w))+"% ",1)]),_:1})],512),[[ne,y(h)]]),u(e,{keyType:y(S)},null,8,["keyType"])],512)}}});const ue=p=>(le("data-v-b87cbf31"),p=p(),re(),p),he={class:"w100 h100 position-relative"},be=ue(()=>f("div",{class:"middle m-t-20"},[f("span",{style:{color:"#fff"}},"中央排水泵房")],-1)),ve=N({name:"comprehensive/drain"}),ye=Object.assign(ve,{setup(p){return(l,a)=>{const o=P;return O(),F("div",he,[u(fe,{class:"three"}),be,u(o,{type:"3"})])}}}),Ue=ce(ye,[["__scopeId","data-v-b87cbf31"]]);export{Ue as default};
