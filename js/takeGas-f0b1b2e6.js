import{_ as Y}from"./my-box-a135ed03.js";import{a as B,A as L,a6 as J,g as h,a7 as Q,a8 as W,U as X,a9 as Z,f as F,B as ee,o as m,c as _,aa as te,ab as ae,u,b as i,h as w,w as $,t as y,d as I,at as D,_ as ne,Y as k,l as O,au as se,F as P,r as j,i as G}from"./index-a360b131.js";import{_ as le}from"./my-compass-a39cd824.js";import{S as oe,P as ie,c as ce,l as re,r as ue,a as de,G as pe,A as fe,D as me,k as z,b as _e,C as ve,_ as he}from"./threeMinx-2c4305b0.js";import{m as T}from"./my-label-41458c09.js";const ge=d=>B({method:"get",data:d,url:L+"/integratedControl/gas/ventilationSystem"}),be=d=>B({method:"get",data:d,url:L+"/integratedControl/gas/coolingSystem"}),ye=d=>B({method:"get",data:d,url:L+"/integratedControl/gas/pumpInfo"}),we={style:{position:"absolute","z-index":"10"},class:"flex-center w100 h100"},xe={class:"fw",style:{"font-size":"30px"}},ke=I({name:"tunnelling3d"}),Se=Object.assign(ke,{props:{data:{type:Object,required:!0}},setup(d){const l=d;let p=J(null),r,c,a,f=h(!1),x=h(0),s,v,g,b;Q(p,e=>{g=e[0].contentRect.width,b=e[0].contentRect.height,a.aspect=g/b,a.updateProjectionMatrix(),r.setSize(g,b),s.setSize(g,b)}),W(()=>{f.value=!0,U()}),X(()=>{cancelAnimationFrame(R),r==null||r.dispose(),p=null,c=null});function U(){c=new oe,a=new ie(45,g/b,1,2e3),a.position.set(-8,3,10),a.lookAt(0,3,-8),v=ce(a),c.add(a),s=re(p),r=ue(p),H(),V()}let A=[],S=new de;function V(){new Z().get("/my-product/model/瓦斯抽放系统.glb").then(e=>{let n=URL.createObjectURL(e);pe.load(n,t=>{f.value=!1,c.add(t.scene),c.add(S),A=t.scene.getObjectByName("墙001").children,N()},t=>{t.lengthComputable&&(x.value=Math.round(t.loaded/t.total*100,2))})})}const q=F(()=>{var n,t;let e=[];return(t=(n=l.data)==null?void 0:n.pumpData)==null||t.forEach(o=>{e.push({name:o.pumpName,list:[{title:"运行状态",val:o.pumpState==1?"正常":"停止"},{title:"出口压力",val:o.pumpPressure,suffix:"KPa"}]})}),e}),M=F(()=>{var n,t;let e=[];return(t=(n=l.data)==null?void 0:n.pumpData)==null||t.forEach(o=>{e.push({name:o.pumpName,list:[{title:"阀门开度",val:o.pumpValve,suffix:"%"}]})}),e}),E=F(()=>{var n,t;let e=[];return(t=(n=l.data)==null?void 0:n.pipelineData)==null||t.forEach(o=>{o.pipelineType=="1"&&e.push({name:"高压管道",list:[{title:"管道压力",val:o.pipelinePressure,suffix:"KPa"},{title:"管道流量",val:o.pipelineFlow,suffix:"m³/min"},{title:"管道瓦斯浓度",val:o.pipelineGas,suffix:"%"}]})}),e[0]});ee(()=>l.data,()=>{K()});function K(){S.clear(),q.value.forEach((e,n)=>{C(D(T,{data:e,callBack:function(){}}).mount(document.createElement("div")).$el,[-7.7+n*5.5,.7,1])}),M.value.forEach((e,n)=>{C(D(T,{data:e,callBack:function(){}}).mount(document.createElement("div")).$el,[-6.5+n*5,3.3,-1])}),E.value&&C(D(T,{data:E.value,callBack:function(){}}).mount(document.createElement("div")).$el,[-5,5,0])}function C(e,n){const t=new ve(e);t.position.set(...n),t.scale.set(.012,.012,.012),S.add(t)}function H(){c.add(new fe("#d6c9c9"),.2);let e=new me("#ffffff",.5);e.position.set(-50,50,50),c.add(e)}let R;function N(){z.value=v(A),_e(a),s==null||s.render(c,a),r==null||r.render(c,a),R=requestAnimationFrame(N)}return(e,n)=>{const t=he,o=le;return m(),_("div",{ref_key:"container",ref:p},[te(i("div",we,[w(t,{scale:2},{default:$(()=>[i("span",xe,y(u(x))+"% ",1)]),_:1})],512),[[ae,u(f)]]),w(o,{keyType:u(z)},null,8,["keyType"])],512)}}});const Ce={class:"w100 h100 flex flex-col position-relative"},Fe={class:"f1 h0 flex-col p-t-26 p-l-10 left"},De={class:"flex-col h100"},Te={class:"flex m-between p-10"},$e={key:0,class:"f1 h0 overflow-y-auto"},Be={key:1,class:"f1 h0 overflow-y-auto"},Le=I({name:"comprehensive/takeGas"}),Ae=Object.assign(Le,{setup(d){let l=h(1),p=h([]);ge().then(a=>{p.value=a.data});let r=h([]);be().then(a=>{r.value=a.data});let c=h({});return ye().then(a=>{c.value=a.data}),(a,f)=>{const x=Y;return m(),_("div",Ce,[w(Se,{class:"three",data:u(c)},null,8,["data"]),i("div",Fe,[w(x,{class:"f1 h0 m-b-10",title:"管道间环境监测"},{default:$(()=>[i("div",De,[i("div",Te,[i("div",{id:"btn1",class:k(["btn",{bgc:u(l)==1}]),onClick:f[0]||(f[0]=s=>O(l)?l.value=1:l=1)},"通风系统",2),i("div",{id:"btn2",class:k(["btn",{bgc:u(l)==2}]),onClick:f[1]||(f[1]=s=>O(l)?l.value=2:l=2)},"冷却系统",2)]),w(se,{name:"fade-transform",mode:"out-in",appear:""},{default:$(()=>[u(l)==1?(m(),_("div",$e,[(m(!0),_(P,null,j(u(p),(s,v)=>(m(),_("div",{class:"flex m-between p-10",key:v},[i("span",null,y(s.fanName),1),i("span",null,[G(y(s.fanState==1?"正常":"停机"),1),i("span",{class:k(s.fanState==1?"start":"stop")},null,2)])]))),128))])):(m(),_("div",Be,[(m(!0),_(P,null,j(u(r),(s,v)=>(m(),_("div",{class:"flex m-between p-10",key:v},[i("span",null,y(s.waterTankName),1),i("span",null,[G(y(s.waterTankState==1?"正常":"停机")+" ",1),i("span",{class:k(s.waterTankState==1?"start":"stop")},null,2)])]))),128))]))]),_:1})])]),_:1})])])}}}),je=ne(Ae,[["__scopeId","data-v-60123746"]]);export{je as default};
